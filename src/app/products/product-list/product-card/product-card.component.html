<div class="card">
  @if (isEditMode) {
    <form (ngSubmit)="onSubmit()">
      <label>Name:
        <input type="text" [(ngModel)]="product.name" required name="name">
      </label>
      <label>Description:
        <input [(ngModel)]="product.description" type="text" name="description">
      </label>
      <label>Price:
        <input type="number" name="price" required [(ngModel)]="product.price">
      </label>
      <label>Tags:
        <select (change)="addTag($event)">
          @if (tags.length) {
            <option value="-1" disabled selected>Select tag</option>
          } @else {
            <option value="-1" disabled selected>No available tags</option>
          }
          @for (tag of tags;track tag.id) {
            <option value="{{tag.name}}">{{ tag.name }}</option>
          }
        </select>
      </label>
      <div>Selected Tags:
        @for (tagName of selectedTags;track tagName) {
          <p>{{ tagName }}</p>
        }
      </div>
      <button type="submit">Save Edit</button>
      <button (click)="toggleEditForm()">Close Edit Mode</button>
    </form>
  } @else {
    <h3>{{ product.name }}</h3>
    <p>{{ product.price | currency }}</p>
    @if (product.tags) {
      <div class="tags">
        @for (tag of product.tags;track tag.id) {
          <p class="tag">{{ tag.name }}</p>
        }
      </div>
    }
    <button (click)="showDetail(product.id)">show details</button>
    <button (click)="deleteProduct(product.id)">Delete {{ product.name }}</button>
    <button (click)="toggleEditForm()" [disabled]="isEditButtonDisabled">Edit {{ product.name }}</button>
  }
</div>
